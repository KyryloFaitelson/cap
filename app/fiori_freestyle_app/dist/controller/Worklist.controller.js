sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","../model/formatter","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/Label","sap/ui/comp/smartvariants/PersonalizableInfo"],function(e,t,i,o,s,a,n){"use strict";return e.extend("com.nttdata.fiorifreestyleapp.controller.Worklist",{formatter:i,onInit:function(){var e;this._aTableSearchState=[];e=new t({worklistTableTitle:this.getResourceBundle().getText("worklistTableTitle"),shareSendEmailSubject:this.getResourceBundle().getText("shareSendEmailWorklistSubject"),shareSendEmailMessage:this.getResourceBundle().getText("shareSendEmailWorklistMessage",[location.href]),tableNoDataText:this.getResourceBundle().getText("tableNoDataText")});this.setModel(e,"worklistView");this.oSmartVariantManagement=this.getView().byId("svm");this.oFilterBar=this.getView().byId("filterbar");this.oTable=this.getView().byId("table")},onBeforRendering:function(){},onUpdateFinished:function(e){var t,i=e.getSource(),o=e.getParameter("total");if(o&&i.getBinding("items").isLengthFinal()){t=this.getResourceBundle().getText("worklistTableTitleCount",[o])}else{t=this.getResourceBundle().getText("worklistTableTitle")}this.getModel("worklistView").setProperty("/worklistTableTitle",t)},onPress:function(e){this._showObject(e.getSource())},onNavBack:function(){history.go(-1)},onCreate:function(){var e=this.getView().byId("table").getBinding("items").create({title:"New",availability:0});this._showNewObject(e)},_showNewObject:function(e){this.getRouter().navTo("create",{objectId:e.getBinding().getPath().substring("/Products".length)})},onDelete:function(){var e=this.getView().byId("table");var t=[];t=e.getSelectedContexts();for(let e=0;e<t.length;e++){this._onDelete(t[e])}},_onDelete:function(e){e.delete()},onSearch:function(e){if(e.getParameters().refreshButtonPressed){this.onRefresh()}else{var t=[];var i=e.getParameter("query");if(i&&i.length>0){t=[new o("ID",s.Contains,i)]}this._applySearch(t)}},onRefresh:function(){var e=this.byId("table");e.getBinding("items").refresh()},_showObject:function(e){this.getRouter().navTo("object",{objectId:e.getBindingContext().getPath().substring("/Products".length)})},_applySearch:function(e){var t=this.byId("table"),i=this.getModel("worklistView");t.getBinding("items").filter(e,"Application");if(e.length!==0){i.setProperty("/tableNoDataText",this.getResourceBundle().getText("worklistNoDataWithSearchText"))}}})});